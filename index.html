<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Waterworld Arcade</title>
    <link rel="stylesheet" href="style.css">
    <meta name="mobile-web-app-capable" content="yes">
</head>
<body>
    <div class="game-container">
        <div class="game-title-bar">WATERWORLD ARCADE</div>
        <p id="messageBoard">PC: Flechas=Inclinar, A/D=Jets. Móvil: Botones/Activar Sensor.</p>

        <div class="game-console">
            <div class="screen-area">
                <canvas id="gameCanvas"></canvas>
                <div class="underwater-bg"></div>
                
                <div id="startScreen" style="display: flex;"> {/* Asegurar que se muestra al inicio */}
                    <h1>Waterworld Arcade</h1>
                    <p>¡Selecciona un modo de juego!</p>
                    <button id="startNormalModeButton" class="mode-select-button normal-mode-button">Modo Normal</button>
                    <button id="startArcadeModeButton" class="mode-select-button arcade-mode-button">Modo Arcade</button>
                    <button id="howToPlayButton" class="how-to-play-main-button">Cómo Jugar</button> 
                    <p class="credits">Creado por orochi_iory<br>con la ayuda de Gemini</p>
                </div>

                <div id="levelStartScreen" class="modal-screen" style="display: none;">
                    <div class="modal-content level-transition-content">
                        <h2 id="levelStartTitle">Nivel X</h2>
                        <p id="levelStartObjective">Objetivo: ...</p>
                        <button id="beginLevelButton">¡Comenzar!</button>
                    </div>
                </div>

                <div id="levelEndScreen" class="modal-screen" style="display: none;">
                    <div class="modal-content level-transition-content">
                        <h2 id="levelEndTitle">¡Nivel Completado!</h2>
                        <p id="levelEndTimeBonus">Bonus por tiempo: X</p>
                        {/* <p id="levelEndScore">Puntuación Nivel: Y</p> Removido si no se usa */}
                        <p id="levelEndTotalScore">Puntuación Total Arcade: Z</p>
                        <button id="nextLevelButton">Siguiente Nivel</button>
                        <button id="arcadeEndToMenuButton">Volver al Menú</button>
                    </div>
                </div>


                <div id="howToPlayScreen" class="modal-screen" style="display: none;">
                    <div class="modal-content">
                        <span class="close-button" id="closeHowToPlayButton">×</span>
                        <h2>Cómo Jugar</h2>
                        <div class="instructions-section">
                            <h3>Controles:</h3>
                            <p><strong>PC:</strong> Flechas=Inclinar, A/D=Jets.</p>
                            <p><strong>Móvil:</strong> Botones TILT/JET. Botón SENSOR (si disponible) para control por movimiento.</p>
                        </div>
                        <div class="instructions-section">
                            <h3>Sistema de Puntuación (General):</h3>
                            <ul>
                                <li><strong>Aro Encestado:</strong> 25 puntos.</li>
                                <li><strong>Racha de Color:</strong> (2 aros mismo color seguidos en palo) = Puntos x2 para el 2º aro.</li>
                                <li><strong>Palo Lleno:</strong> Multiplica x4 la suma de puntos de los aros de ese palo.</li>
                                <li><strong>Palo Monocolor:</strong> Multiplica x10 el valor base de los aros de ese palo (ej: 1500 pts).</li>
                            </ul>
                        </div>
                        <div class="instructions-section">
                             <h3>Modo Normal:</h3>
                             <p>El objetivo es llenar todos los palos. ¡Consigue la mayor puntuación!</p>
                             <ul>
                                <li><strong>Todos los Palos Llenos:</strong> Multiplica x2 la puntuación acumulada.</li>
                                <li><strong>¡BONO MAESTRO!:</strong> Si todos los palos son monocolor (uno de cada color), ¡multiplica x100 la puntuación!</li>
                            </ul>
                        </div>
                        <div class="instructions-section">
                             <h3>Modo Arcade:</h3>
                             <p>Supera 5 niveles con objetivos y configuraciones de palos variables. Tiempo límite: 1:30 por nivel.</p>
                             <p><strong>Objetivo del Nivel:</strong> Llenar 2 palos completos <strong>O</strong> tener al menos 3 aros en cada uno de los 4 palos.</p>
                             <ul>
                                 <li><strong>Pasar de Nivel:</strong> Al cumplir el objetivo. Recibes bonus por tiempo restante.</li>
                                 <li><strong>Game Over:</strong> Si el tiempo se agota.</li>
                                 <li><strong>Configuración de Palos por Nivel:</strong></li>
                                 <li>Nivel 1: Estándar.</li>
                                 <li>Nivel 2: 4 palos en línea horizontal en el centro.</li>
                                 <li>Nivel 3: Estándar con posiciones Y invertidas.</li>
                                 <li>Nivel 4: Palos como Nivel 1, se mueven horizontalmente.</li>
                                 <li>Nivel 5: 4 palos en el centro, moviéndose verticalmente.</li>
                             </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="controls-panel">
                <div class="control-column">
                    <button id="tiltLeftButton" class="control-button tilt-button">‹‹</button>
                    <button id="leftJetButton" class="control-button jet-button">JET</button>
                </div>
                <div class="score-display-container">
                     <button id="resetButton" class="reset-button">Reset</button>
                     <button id="fullscreenButton" class="fullscreen-button">⛶</button> 
                     <button id="enableSensorButton" class="sensor-button" style="display: none;">SENSOR</button>
                </div>
                <div class="control-column">
                    <button id="tiltRightButton" class="control-button tilt-button">››</button>
                    <button id="rightJetButton" class="control-button jet-button">JET</button>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js" defer></script>
</body>
</html>
